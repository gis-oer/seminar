<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>QGIS入門 - gis_exercises_ut</title>
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "light" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div id="sidebar-scrollbox" class="sidebar-scrollbox">
                <ol class="chapter"><li class="expanded "><a href="../index.html"><strong aria-hidden="true">1.</strong> 本実習について</a></li><li class="expanded "><a href="../day1/index.html"><strong aria-hidden="true">2.</strong> Day 1</a></li><li><ol class="section"><li class="expanded "><a href="../day1/qgis.html" class="active"><strong aria-hidden="true">2.1.</strong> QGIS入門</a></li><li class="expanded "><a href="../day1/tasks/t_qgis_entry.html"><strong aria-hidden="true">2.2.</strong> 課題①</a></li><li class="expanded "><a href="../day1/07.html"><strong aria-hidden="true">2.3.</strong> データダウンロード</a></li><li class="expanded "><a href="../day1/tasks/t_07.html"><strong aria-hidden="true">2.4.</strong> 課題②</a></li><li class="expanded "><a href="../day1/12.html"><strong aria-hidden="true">2.5.</strong> ネットワーク分析</a></li><li class="expanded "><a href="../day1/tasks/t_12.html"><strong aria-hidden="true">2.6.</strong> 課題③</a></li></ol></li><li class="expanded "><a href="../day2/index.html"><strong aria-hidden="true">3.</strong> Day 2</a></li><li><ol class="section"><li class="expanded "><a href="../day2/08.html"><strong aria-hidden="true">3.1.</strong> 空間座標系の変換</a></li><li class="expanded "><a href="../day2/tasks/t_08.html"><strong aria-hidden="true">3.2.</strong> 課題①</a></li><li class="expanded "><a href="../day2/11.html"><strong aria-hidden="true">3.3.</strong> 基本的な空間解析</a></li><li class="expanded "><a href="../day2/tasks/t_11.html"><strong aria-hidden="true">3.4.</strong> 課題②〜③</a></li><li class="expanded "><a href="../day2/13.html"><strong aria-hidden="true">3.5.</strong> 領域分析（バッファ）</a></li><li class="expanded "><a href="../day2/tasks/t_13.html"><strong aria-hidden="true">3.6.</strong> 課題④</a></li><li class="expanded "><a href="../day2/14.html"><strong aria-hidden="true">3.7.</strong> 点データの分析</a></li><li class="expanded "><a href="../day2/tasks/t_14.html"><strong aria-hidden="true">3.8.</strong> 課題⑤</a></li></ol></li><li class="expanded "><a href="../day3/index.html"><strong aria-hidden="true">4.</strong> Day 3</a></li><li><ol class="section"><li class="expanded "><a href="../day3/10a.html"><strong aria-hidden="true">4.1.</strong> 空間データの作成</a></li><li class="expanded "><a href="../day3/tasks/t_10.html"><strong aria-hidden="true">4.2.</strong> 課題①</a></li><li class="expanded "><a href="../day3/15.html"><strong aria-hidden="true">4.3.</strong> 地形情報の可視化</a></li><li class="expanded "><a href="../day3/tasks/t_15.html"><strong aria-hidden="true">4.4.</strong> 課題②</a></li><li class="expanded "><a href="../day3/15_1.html"><strong aria-hidden="true">4.5.</strong> 流域解析</a></li><li class="expanded "><a href="../day3/tasks/t_15_1.html"><strong aria-hidden="true">4.6.</strong> 課題③</a></li><li class="expanded "><a href="../day3/18.html"><strong aria-hidden="true">4.7.</strong> 空間補間</a></li><li class="expanded "><a href="../day3/tasks/t_18.html"><strong aria-hidden="true">4.8.</strong> 課題④〜⑤</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar" class="menu-bar">
                    <div id="menu-bar-sticky-container">
                        <div class="left-buttons">
                            <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                                <i class="fa fa-bars"></i>
                            </button>
                            <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                                <i class="fa fa-paint-brush"></i>
                            </button>
                            <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                                <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                            </ul>
                            
                            <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                                <i class="fa fa-search"></i>
                            </button>
                            
                        </div>

                        <h1 class="menu-title">gis_exercises_ut</h1>

                        <div class="right-buttons">
                            <a href="../print.html" title="Print this book" aria-label="Print this book">
                                <i id="print-button" class="fa fa-print"></i>
                            </a>
                            
                        </div>
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#qgisビギナーズマニュアル" id="qgisビギナーズマニュアル">QGISビギナーズマニュアル</a></h1>
<p>　本教材は、QGIS入門者向けの実習用教材です。QGISを実際に操作しながら、空間データの表示、シンボルの変更、地図のレイアウト等を学習することができます。</p>
<h2><a class="header" href="#menu" id="menu"><strong>Menu</strong></a></h2>
<ul>
<li><a href="#qgis%E3%81%A8%E3%81%AF%EF%BC%9F">QGISとは？</a></li>
<li><a href="#%E8%B5%B7%E5%8B%95">起動</a></li>
<li><a href="#%E3%82%A6%E3%82%A4%E3%83%B3%E3%83%89%E3%82%A6">ウインドウ</a></li>
<li><a href="#%E5%90%84%E7%A8%AE%E3%83%9C%E3%82%BF%E3%83%B3">各種ボタン</a></li>
<li><a href="#%E3%83%87%E3%83%BC%E3%82%BF%E3%81%AE%E8%AA%AD%E3%81%BF%E8%BE%BC%E3%81%BF">データの読み込み</a></li>
<li><a href="#%E6%A9%9F%E8%83%BD%E8%AA%AC%E6%98%8E">機能説明</a></li>
<li><a href="#%E5%B1%9E%E6%80%A7%E3%83%86%E3%83%BC%E3%83%96%E3%83%AB">属性テーブル</a></li>
<li><a href="#%E3%83%97%E3%83%AD%E3%83%91%E3%83%86%E3%82%A3">プロパティ</a></li>
<li><a href="#%E5%9C%B0%E5%9B%B3%E3%82%BF%E3%82%A4%E3%83%AB%E3%81%AE%E8%AA%AD%E3%81%BF%E8%BE%BC%E3%81%BF">地図タイルの読み込み</a></li>
<li><a href="#%E5%9C%B0%E5%9B%B3%E3%81%AE%E3%83%AC%E3%82%A4%E3%82%A2%E3%82%A6%E3%83%88">地図のレイアウト</a></li>
<li><a href="#%E4%BD%9C%E6%A5%AD%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E4%BF%9D%E5%AD%98">作業ファイルの保存</a></li>
<li><a href="#%E3%83%97%E3%83%A9%E3%82%B0%E3%82%A4%E3%83%B3">プラグイン</a></li>
<li><a href="#%E3%83%87%E3%83%BC%E3%82%BF%E3%81%AE%E4%BF%9D%E5%AD%98%E5%BD%A2%E5%BC%8F">データの保存形式</a></li>
</ul>
<p><strong>実習用データ</strong></p>
<p>実習をはじめる前に、<a href="https://github.com/gis-oer/datasets/raw/master/tokyo.zip">tokyo.zip</a>をダウンロードしてください。</p>
<h2><a class="header" href="#qgisとは" id="qgisとは">QGISとは？</a></h2>
<p>　QGISは、無償で利用できるオープンソース（GNU General Public License v2で提供）のGISです。Windows,Mac,Linux,Unix, Androidなど様々な環境で動作します。様々なプラグインや、GRASSやPostGISなど他のオープンソースGISと連携して使用することで、多種類の分析が可能です。GISの基本操作に必要な機能を網羅しているだけでなく、Web上に多数のマニュアルがアップロードされているため、GISの学習がしやすいソフトウェアです。  </p>
<blockquote>
<p>http://qgis.org/ja/site/about/index.html を参考に作成</p>
</blockquote>
<p><a href="./QGIS.html#Menu">▲メニューへもどる</a></p>
<h2><a class="header" href="#起動" id="起動">起動</a></h2>
<p>　デスクトップのQGISアイコンをダブルクリックする。しばらくするとQGISが起動する。
<img src="pic/Qpic5.png" alt="起動" /></p>
<p>最初にQGIS3を起動した時には、下記の様に古いバージョンのGIS2からの設定を取り込むか聞かれることがある。この演習ではQGIS2とは関係なくQGIS3を利用するため、「QGIS 2の設定をインポートせずクリーンな状態でスタートする」を選択する。この設定は最初の1回のみで済む。
<img src="pic/first_question.jpg" alt="起動" /></p>
<p><a href="./QGIS.html#Menu">▲メニューへもどる</a></p>
<h2><a class="header" href="#ウインドウ" id="ウインドウ">ウインドウ</a></h2>
<p>　QGISを起動すると、下の図のようなウィンドウが表示されます。ウインドウ上のアイコンの配置は自由に変更することができます。アイコンのない箇所（グレーの部分）で右クリックして出てくる「パネル」メニューからパネルを選択することにより、別機能のパネルを呼び出すことができます。アイコンの数は、インストールしているプラグインの数によっても異なります。そのため、インストール直後のQGISと教材の画像が異なっていることを確認してください。
<img src="pic/Qpic6.png" alt="ウインドウ" /></p>
<p><a href="./QGIS.html#Menu">▲メニューへもどる</a></p>
<h2><a class="header" href="#各種ボタン" id="各種ボタン">各種ボタン</a></h2>
<p>　以下では、QGISで主に使用するボタンについて解説しています。</p>
<p><img src="pic/Qpic7.png" alt="ボタンA" /></p>
<ol>
<li>QGISファイルを保存</li>
<li>名前をつけてQGISファイルを保存</li>
<li>地図移動</li>
<li>地図の拡大と縮小</li>
<li>選択領域にズーム</li>
<li>動作の前後移動</li>
<li>地物情報の表示</li>
<li>選択と選択取り消し</li>
<li>長さ、面積計測（手動）</li>
<li>レイヤ編集</li>
<li>レイヤの読み込み</li>
</ol>
<p>また、ウィンドウの下部にはカーソルの座標や縮尺、拡大、回転、座標系などを確認できるツールバーがあります。</p>
<p><img src="pic/Qpic8.png" alt="ボタンB" /></p>
<p><a href="./QGIS.html#Menu">▲メニューへもどる</a></p>
<h2><a class="header" href="#データの読み込み" id="データの読み込み">データの読み込み</a></h2>
<p>　GISでは、位置情報を保持するベクトルデータとラスタデータを用いて、空間分析等を行います。各データの特徴は、<a href="../00/00.html">GISの基本概念_ベクトルデータとラスタデータ</a>を参照してください。以下では、代表的なデータ形式を取り上げ、それらをQGISで読み込む手法について解説します。教材中に記載されている使用データ(<a href="https://github.com/gis-oer/datasets/raw/master/tokyo.zip">tokyo.zip</a>)を用意してください。そして、tokyo.zipファイルをダウンロード後に解凍してください）。</p>
<h3><a class="header" href="#ベクトルデータ読み込み" id="ベクトルデータ読み込み">ベクトルデータ読み込み</a></h3>
<p>以下では、GISで扱う代表的なベクトルデータ形式のシェープファイルを読み込む手法について解説する。シェープファイルの特徴は、<a href="../00/00.html">GISの基本概念_シェープファイル</a>を参照してください。</p>
<p><code>データソースマネージャーを開く</code>のアイコンをクリックし、<code>ベクタ</code>のタブに切り替える。エンコーディングをUTF-8とし、ソースから、cvs_jgd2011_9.shpを指定する。<code>追加</code>をクリックするとデータが表示される。
<img src="pic/Qpic9.png" alt="ベクタ" /></p>
<p><img src="pic/Qpic10.png" alt="ベクタ" /></p>
<p>上記のように、cvs_jgd2011_9.shpを読み込むと、東京23区内のコンビニが表示される（ポイントデータ）。ベクトルデータには、ポイント、ライン、ポリゴンのデータ形式がある。ラインとポリゴンも同様の手法で読み込むことができる。</p>
<h4><a class="header" href="#ライン" id="ライン">ライン</a></h4>
<p>東京周辺の河川(river_9kei.shp)を表示する。
<img src="pic/Qpic11.png" alt="ベクタ" /></p>
<h4><a class="header" href="#ポリゴン" id="ポリゴン">ポリゴン</a></h4>
<p>東京23区のエリア(tokyo_23ku_jgd2011_9.shp)を表示する。
<img src="pic/Qpic12.png" alt="ベクタ" /></p>
<p>【註】ここまで続けてベクトルデータを読み込むと、ポイントの上にラインが被さり、さらにポリゴンのデータが被さって表示されます。これはレイヤーで後から読み込んだものが、一番上に表示されるためです。3つのデータがうまく表示されるように、レイヤーパネルでレイヤー名をドラッグしてレイヤー順番を変えます。委細については、後の「レイヤ構造」で説明します。</p>
<h3><a class="header" href="#ラスタデータの読み込み" id="ラスタデータの読み込み">ラスタデータの読み込み</a></h3>
<p>以下では、GISで扱う代表的なラスタデータ形式のGeotiffを読み込む手法について解説する。<code>データソースマネージャーを開く</code>のアイコンをクリックし、<code>ラスタ</code>のタブに切り替える。ソースから、tokyo_srtm.tifを指定し追加をクリックする。
<img src="pic/Qpic13.png" alt="ラスタ" /></p>
<p><img src="pic/Qpic14.png" alt="ラスタ" /></p>
<h4><a class="header" href="#テキストデータ読み込み" id="テキストデータ読み込み">テキストデータ読み込み</a></h4>
<p>以下では、GISで扱う代表的なテキストファイルであるCSV形式のデータを読み込む手法について解説する。<code>データソースマネージャーを開く</code>のアイコンをクリックし、<code>デリミティッドテキスト</code>のタブに切り替える。ファイル名から、post_office.csvを指定する。X,Yフィールドに対応する緯度経度があれば指定し、緯度経度がなければジオメトリなしにチェックをする(ここでは、<code>ジオメトリ定義＞ジオメトリなし</code>にチェックを入れてください。)。
<img src="pic/Qpic15.png" alt="CSV" /></p>
<p>【註】本実習のCSVファイルはUTF-8エンコーディングで作成されています。GGIS3のデフォルトでのエンコーディング（レイヤ名の横で指定できます）はUTF-8になっていますのでこのままで結構です。ただ、Windowsで作成されるCSVファイルはShift-JIS形式で作成されていることが多いので、その場合はエンコーディング形式を「Shift-JIS」に選択する必要があります。エンコーディングが正しく設定されているかは、サンプルデータの表示が適切になされていることで確認することができます。</p>
<p><a href="./QGIS.html#Menu">▲メニューへもどる</a></p>
<h2><a class="header" href="#レイヤ構造" id="レイヤ構造">レイヤ構造</a></h2>
<p>　GISでは、レイヤ構造に従ってデータの切り替えや重ね合わせを行います。以下では、レイヤの切り替え、重ね合わせ、削除の手法を解説します。</p>
<h3><a class="header" href="#レイヤ表示の切替" id="レイヤ表示の切替">レイヤ表示の切替</a></h3>
<p>各レイヤの横にあるチェックボックスにチェックをいれると、地図表示画面にレイヤが表示される。
<img src="pic/Qpic16.png" alt="CSV" /></p>
<h3><a class="header" href="#レイヤの重ね合わせ" id="レイヤの重ね合わせ">レイヤの重ね合わせ</a></h3>
<p>レイヤウィンドウでレイヤを上下にずらすと、地図表示画面が連動して切り替わる。
<img src="pic/Qpic17.png" alt="CSV" /></p>
<h3><a class="header" href="#レイヤの削除" id="レイヤの削除">レイヤの削除</a></h3>
<p>レイヤウィンドウでレイヤの上で右クリックし、<code>レイヤの削除</code>をクリックする。この処理では、レイヤウィンドウ上からレイヤが消えるのみで、データそのものは削除されていない点に注意する。
<img src="pic/Qpic18.png" alt="CSV" /></p>
<p><a href="./QGIS.html#Menu">▲メニューへもどる</a></p>
<h2><a class="header" href="#機能説明" id="機能説明">機能説明</a></h2>
<p>　QGISには、地図のレイアウト、データの作成、分析など様々な機能があります。以下では、QGISの機能について説明しています。</p>
<p><img src="pic/Qpic19.png" alt="機能説明a" />
プロジェクト：QGIS（.qgs）ファイルの保存や読み込み、地図のレイアウト、エクスポートができる。</p>
<p>編集：ベクタレイヤの編集ができる。編集状態になると、アクティブになる。</p>
<p><img src="pic/Qpic20.png" alt="機能説明b" />
ビュー：地図の移動や拡大、縮小など、地図画面の操作ができる。</p>
<p>レイヤ：ベクタやラスタなどのレイヤが追加できる。</p>
<p>ポイント、ライン、ポリゴン新規レイヤの作成もできる。</p>
<p><img src="pic/Qpic21.png" alt="機能説明c" />
設定：オプションから、プロジェクトの設定やスナップオプションが設定できる。</p>
<p>プラグイン：プラグインの管理とインストールができる。Python入力画面が開ける。</p>
<p><img src="pic/Qpic22.png" alt="機能説明d" />
ベクタ：バッファやクリップなどベクタに関する処理ができる。</p>
<p>ラスタ：斜面方位図や陰影図の作成などラスタに関する処理ができる。</p>
<p><img src="pic/Qpic23.png" alt="機能説明e" />
データベース：PostGISなどのデータベースへの接続やeVisプラグインによる外部ファイルとの連携が可能。</p>
<p>Web：背景地図の設定やweb地図の書き出しができる（プラグインによる）。</p>
<p><img src="pic/Qpic24.png" alt="機能説明f" />
プロッセッシング：他のGISソフトウェアと連携して操作ができる（R,GRASS,SAGAなどがQGIS内で処理できる）。</p>
<p>ヘルプ：QGISのヘルプが確認できる。</p>
<p><a href="./QGIS.html#Menu">▲メニューへもどる</a></p>
<h2><a class="header" href="#属性テーブル" id="属性テーブル">属性テーブル</a></h2>
<p>　ベクトルデータは、複数の属性情報を保持することができます。以下では、QGISで属性情報を参照する手法について、解説しています。</p>
<p><strong>以下では、cvs_jgd2011_9.shpのみ利用します。不要なレイヤを削除してください。</strong></p>
<p>データを読み込み、レイヤウィンドウのレイヤの上で右クリックすると、属性テーブルを開くことができる。
<img src="pic/Qpic25.png" alt="属性テーブルa" /></p>
<p>属性テーブルで選択したものは、地図上で黄色で表示される。選択アイコンで地図上の地物を選択した場合は、その地物に対応する属性テーブルの行が選択される。
地図上の地物を選択した時に、そのままでは属性テーブルの中で全てのデータが表示され、選択したものがわかりにくい時がある。その時には属性テーブルの下部にあるポップアップメニューから「選択した地物を表示する」を選択し、選択された地物に関する属性だけが表示されるようにすることで見やすくなります。
なお、ポリゴンによる選択（選択ボタンの右側にある小さな三角を押すとポップアップメニューが表示され、ポリゴン、フリーハンド等が選択できます）は、右クリックで終了し、フリーハンドによる選択は左クリックで終了と、操作性に一貫がなく分かりにくい状態です。</p>
<p><img src="pic/Qpic26.png" alt="属性テーブルb" /></p>
<p><a href="./QGIS.html#Menu">▲メニューへもどる</a></p>
<h2><a class="header" href="#プロパティ" id="プロパティ">プロパティ</a></h2>
<p>　QGISでは、レイヤごとにレイヤのプロパティから、データの表示情報やスタイルの変更ができます。ポイントでは形や大きさ、ラインでは線の形や太さ、ポリゴンでは塗りつぶしの色等を変更することができます。属性情報に応じて、スタイルを分けることもできます。これは、レイヤの表示が変化するのみの処理で、データそのものの形状は変更されません。</p>
<p>以下では、レイヤのプロパティについて解説し、ポイントデータのスタイルの変更を行います。</p>
<p>レイヤウインドウからプロパティを表示したいレイヤを選択し、右クリックからプロパティをクリックする。
<img src="pic/Qpic27.png" alt="プロパティ" /></p>
<h3><a class="header" href="#ソース" id="ソース">ソース</a></h3>
<p>座標系を確認したり、文字コード、表示名の変更がきます。
<img src="pic/Qpic28.png" alt="一般情報" /></p>
<h3><a class="header" href="#シンボロジー" id="シンボロジー">シンボロジー</a></h3>
<p>データのスタイルを整えることができる機能です。データの値に応じて配色やスタイルを変えることができます。分類方法は「単一シンボル」、「分類された」、「段階に分けられた」等があります。</p>
<p>ここでは、ポイントデータの大きさと色を変更します。<code>単一シンボル</code>を選択し、色と大きさを指定する。指定できた状態で<code>OK</code>をクリックすると変更が適用される。
<img src="pic/Qpic29.png" alt="スタイルa" /></p>
<p>以下のように、形を変更することもできる。
<img src="pic/Qpic30.png" alt="スタイルb" /></p>
<p>属性テーブルの値によって、大きさと色を変更するには、シンボロジーの画面の一番上にあるポップアップメニューにおいて、<code>分類された</code>を選択し、分類したいフィールドを選択する。</p>
<p>ここではコンビニごとに色を変更するため、「カラム」フィールドのポップアップメニューから<code>name_en</code>を選択する。この状態で、左下の「分類」ボタンをクリックすると、自動的に<code>name_en</code>の値による色分けが生成される。各色は、シンボルをダブルクリックすることで調整でき、凡例（ラベル）も変更できる。
<img src="pic/Qpic31.png" alt="スタイルc" /></p>
<p>最後に、不要な分類を選択し削除する。<code>OK</code>をクリックすると変更が適用される。
<img src="pic/Qpic32.png" alt="スタイルc" /></p>
<h3><a class="header" href="#ラベル" id="ラベル">ラベル</a></h3>
<p>データを表示する際に、属性情報に基づいてラベルを作成する機能です。以下では、属性値を用いて、ラベルを表示する手法について解説しています。</p>
<p>デフォルトでは「ラベルなし」になっているので、<code>ラベル</code>のポップアップメニューを選択し、<code>単一のラベル</code>を指定し、ラベルのもととなる属性を指定する。ここでは、<code>name_en</code>を指定する。<code>OK</code>をクリックすると変更が適用され、地図上にラベルが表示される。
<img src="pic/Qpic33.png" alt="スタイルc" /></p>
<p><a href="./QGIS.html#Menu">▲メニューへもどる</a></p>
<h2><a class="header" href="#地図タイルの読み込み" id="地図タイルの読み込み">地図タイルの読み込み</a></h2>
<p>　以下では、QGISにXYZタイル形式の背景地図（地理院タイル等）を読み込む手法について解説します。</p>
<p>アイコンが並ぶ箇所（グレーの個所）で右クリックし、<code>パネル＞ブラウザパネル</code>をクリックする。<code>ブラウザパネル＞XYZ Tiles</code>を探し、右クリックし<code>新しい接続</code>をクリックする。
<img src="pic/Qpic34.png" alt="xyz" /></p>
<p>国土地理院の<a href="http://maps.gsi.go.jp/development/ichiran.html">地理院タイル</a>のページから、<code>２．基本測量成果以外で出典の記載のみで利用可能なもの＞タイル一覧＞空中写真・衛星画像＞2007年～</code>を選択し、URLをコピーする。コピーしたURL、名前、ズームレベルを以下のように設定する。<code>OK</code>をクリックすると、ブラウザパネルにタイルが追加される。追加されたタイルをクリックすると、レイヤウィンドウにレイヤとして追加でき、地図も表示される。</p>
<p><img src="pic/Qpic35.png" alt="xyz" /></p>
<p><img src="pic/Qpic36.png" alt="xyz" /></p>
<p>※ 地理院タイルを利用する場合は、利用規約に従ってください。</p>
<p>【註】画像上に地物のラベルを重ね合わせて表示すると、ラベルが画像に紛れて読みにくいことがあります。そのような場合は、レイヤプロパティ＞ラベル＞バッファにて、「テキストバッファを描画する」をクリックし、テキストを縁取り表示させることで見やすくなります。</p>
<h3><a class="header" href="#xyzタイルの一括読み込み" id="xyzタイルの一括読み込み">XYZタイルの一括読み込み</a></h3>
<p>事前にタイル情報を記述したxmlファイルを用いて、<code>接続をロード</code>から、複数のタイルをを一括で読み込むことが可能です。ここでは、使用データのファイル内にある<code>gisoer_tiles.xml</code>を利用します。</p>
<blockquote>
<p>gisoer_tilesは、株式会社MIERUNEの<a href="https://github.com/MIERUNE/mierune-qgis">GitHub(MIERUNE/mierune-qgis)</a>を参考に作成したものです。</p>
</blockquote>
<p><img src="pic/Qpic37.png" alt="xyz" /></p>
<p><a href="./QGIS.html#Menu">▲メニューへもどる</a></p>
<h2><a class="header" href="#地図のレイアウト" id="地図のレイアウト">地図のレイアウト</a></h2>
<p>　以下では、スタイリングしたデータと地理院タイルを用いて、地図をレイアウトして画像として出力する手法について解説します。この実習をはじめる前に、地図画面を任意の地域に拡大してください（以下では、東京大学本郷キャンパス周辺を表示しています）。</p>
<p><code>プロジェクト＞新規プリントレイアウト</code>を選択し、タイトル（地図名など任意）を入力する。データが重ならない場合は、オンザフライCRS投影がうまくいっていない可能性があるので、QGISを再起動する。その後、サンプルデータ、XYZタイルの順で読み込む。
<img src="pic/Qpic38.png" alt="地図のレイアウト" /></p>
<h3><a class="header" href="#プリントコンポーザ" id="プリントコンポーザ">プリントコンポーザ</a></h3>
<p>プリントレイアウトでは、以下の機能を利用して地図を作成することができる。
<img src="pic/Qpic39.png" alt="プリントコンポーザ" /></p>
<ol>
<li>アイテムの選択と移動</li>
<li>地図の移動</li>
<li>地図の追加</li>
<li>画像の追加</li>
<li>テキストの追加</li>
<li>凡例の追加</li>
<li>縮尺バーの追加</li>
<li>地図の出力</li>
</ol>
<p>※アイテムの削除は編集から行う。</p>
<h4><a class="header" href="#レイアウト" id="レイアウト">レイアウト</a></h4>
<p>以下のような地図を作成するため、地図、縮尺バー、凡例、タイトル等を追加する。</p>
<p><img src="pic/Qpic40.png" alt="レイアウト" /></p>
<h4><a class="header" href="#地図の追加" id="地図の追加">地図の追加</a></h4>
<p>地図の追加ボタンをクリックし、地図のレイアウト画面上でドラッグして大きさを指定して、地図を追加する。※追加される地図は、QGISで表示している範囲となる。
<img src="pic/Qpic41.png" alt="レイアウト" /></p>
<h4><a class="header" href="#縮尺バーの追加" id="縮尺バーの追加">縮尺バーの追加</a></h4>
<p>　以下のように、矢印の位置をクリックし、縮尺バーを追加する（ドラッグでの追加も可能）。縮尺バーを選択した状態で、アイテムプロパティのタブに切り替え、線分列の大きさの値等を変更する。
<img src="pic/Qpic42.png" alt="縮尺" /></p>
<p><img src="pic/Qpic43.png" alt="縮尺" /></p>
<h4><a class="header" href="#凡例の追加" id="凡例の追加">凡例の追加</a></h4>
<p>縮尺と同様に凡例を追加する。凡例を選択し、アイテムプロパティで調整する。自動アップデートのチェックをはずすと凡例が編集できる。名称の変更、凡例項目の追加と削除ができる。
<img src="pic/Qpic44.png" alt="凡例" /></p>
<p><img src="pic/Qpic45.png" alt="凡例" /></p>
<h4><a class="header" href="#方位記号の追加" id="方位記号の追加">方位記号の追加</a></h4>
<p>画像の追加から方位記号を追加する。<code>アイテムプロパティ＞検索ディレクトリ</code>をクリックし、方位記号を選択する。デフォルトの状態では、図の赤枠部分をクリックしないと検索ディレクトリが開かないため、注意する。以下のように、アイテムプロパティで、画像の調節を行う。
<img src="pic/Qpic46.png" alt="方位" /></p>
<h4><a class="header" href="#テキストの追加" id="テキストの追加">テキストの追加</a></h4>
<p>テキストの追加からテキストを追加する。メインプロパティに入力したいテキストを記述する。
<img src="pic/Qpic47.png" alt="text" /></p>
<p>以下のように、フォントのサイズや配置等を調節する。
<img src="pic/Qpic48.png" alt="text" /></p>
<p>同様の手法で、任意の個所に、背景地図やデータのライセンス等必要な情報をテキストで追加する。</p>
<h3><a class="header" href="#画像の出力" id="画像の出力">画像の出力</a></h3>
<p>地図のレイアウトを整えた後、画像としてエクスポートする。<code>レイアウト＞画像としてエクスポート</code>を選択する。
<img src="pic/Qpic49.png" alt="エクスポート" /></p>
<p>エクスポートした画像ファイルをダブルクリックすると、以下のような地図が表示できる。画像を出力した後、プリントレイアウトを閉じる。
<img src="pic/Qpic50.png" alt="エクスポートを表示" /></p>
<h3><a class="header" href="#qgisのビュー上に凡例と方位記号を表示する" id="qgisのビュー上に凡例と方位記号を表示する">QGISのビュー上に凡例と方位記号を表示する</a></h3>
<p><code>ビュー&gt;地図装飾</code>を選択する。地図装飾からスケールバー、方位記号を追加する。それぞれの表示にチェックを入れ、形式や配置を調整し<code>OK</code>をクリックする。
<img src="pic/Qpic51.png" alt="view" /></p>
<p>以下のように、QGISのビュー上に縮尺と方位記号が表示される。
<img src="pic/Qpic52.png" alt="ビューb" /></p>
<h2><a class="header" href="#作業ファイルの保存" id="作業ファイルの保存">作業ファイルの保存</a></h2>
<p>QGISには、作業ファイルを保存する機能がある。これにより、一度QGISを閉じた後でも、前回の状態から作業を再開することができる。</p>
<p><code>プロジェクト＞名前を付けて保存</code>をクリックし、任意の名称で出力する。次回開くときは、出力した.qgzファイルをダブルクリックするとQGISが立ち上がる。
<img src="pic/Qpic53.png" alt="save" /></p>
<p>【註】Macではインストール後に.qgzファイルとQGIS3の関連付けがなされていませんので、クリックしたときにアプリケーションの選択を聞かれますので、そこでQGIS3を「開くアプリケーション」として指定してください。</p>
<p><a href="./QGIS.html#Menu">▲メニューへもどる</a></p>
<h2><a class="header" href="#プラグイン" id="プラグイン">プラグイン</a></h2>
<p>　QGISでは、オフィシャルプラグインリポジトリ等から、様々な拡張機能をプラグインとしてインストールできます。プラグインをインストールすることにより、様々な処理が可能になります。<strong>プラグインの実際の使用法は、他の教材で解説しているため、ここではインストール方法のみ解説しています。</strong></p>
<p><code>プラグイン＞プラグインの管理とインストール</code>を選択する。
<img src="pic/Qpic54.png" alt="プラグインのインストール" /></p>
<p>検索から、インストールしたいプラグインを検索する。例として、以下のような便利なプラグインがある。
【註】OpenLayers Pluginのように、プラグイン＞設定にて「実験的プラグインも表示する」にチェックを入れないと検索候補として表示されないものもあります。</p>
<p><img src="pic/Qpic55.png" alt="プラグインの例" />  </p>
<h2><a class="header" href="#データの保存形式" id="データの保存形式">データの保存形式</a></h2>
<p>　GISでは、Shapefile（シェープファイル）形式のベクトルデータを用いることが多いです。しかし、使用するソフトウェアやアプリケーションによっては、別の形式のファイルを使用します。ここでは、QGISによるデータのエクスポートについて解説します。</p>
<p>レイヤの上で右クリックし名前をつけて保存をクリックする。QGISでは、シェープファイル以外にも、KMLやCSV等、様々な形式のデータを出力することができる。
<img src="pic/Qpic59.png" alt="データの保存" /></p>
<p>KMLは、Google Earthで利用できる形式である。Cesiumなどを利用することで、Web上でも表現しやすいデータである。
<img src="pic/Qpic60.png" alt="KML" />
上の図は、東京駅から東京タワーまでの道のりを表示したもの。</p>
<p>CSVは、カンマで区切られたデータ形式である。座標値をもっていればCartoなどで簡単にWeb GISとして表現できる。
<img src="pic/Qpic61.png" alt="CSV" />
上の図は、裾野市オープンデータ　広域避難地・市指定避難所データを加工したものを利用し作成したもの</p>
<p><a href="./QGIS.html#Menu">▲メニューへもどる</a></p>
<h4><a class="header" href="#この教材のa-hreftaskst_qgis_entryhtml課題ページ_qgisビギナーズマニュアルaへ進む" id="この教材のa-hreftaskst_qgis_entryhtml課題ページ_qgisビギナーズマニュアルaへ進む">この教材の<a href="./tasks/t_qgis_entry.html">課題ページ_QGISビギナーズマニュアル</a>へ進む</a></h4>
<h4><a class="header" href="#ライセンスに関する注意事項" id="ライセンスに関する注意事項">ライセンスに関する注意事項</a></h4>
<p>本教材で利用しているキャプチャ画像の出典やクレジットについては、<a href="../license.html">その他のライセンスについて</a>よりご確認ください。</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="../day1/index.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="../day1/tasks/t_qgis_entry.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a href="../day1/index.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a href="../day1/tasks/t_qgis_entry.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        
        <!-- Livereload script (if served using the cli tool) -->
        <script type="text/javascript">
            var socket = new WebSocket("ws://localhost:3001");
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload(true); // force reload from server (not from cache)
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>
        

        

        
        
        
        <script type="text/javascript">
            window.playpen_copyable = true;
        </script>
        

        

        
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
